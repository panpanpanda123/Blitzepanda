# 餐饮数据运营助手 - GUI使用说明

## 概述
这是一个基于tkinter的图形界面程序，整合了餐饮数据运营的完整流程：
1. 数据下载
2. 数据清洗与导入
3. 日报生成

## 功能模块

### 1. 数据下载
- **商户选择**: 可以手动选择需要下载数据的商户，支持全选/取消全选
- **日期设置**: 设置下载的开始和结束日期
- **网速设置**: 根据网络情况调整等待时间，防止因网速慢导致程序崩溃
- **路径设置**: 设置CPC数据和运营数据的下载路径

### 2. 数据清洗与导入
- **自动清洗**: 清理重复数据、标准化格式、处理缺失值
- **数据库导入**: 自动导入清洗后的数据到MySQL数据库
- **文件管理**: 处理完成后自动将原文件移入回收站

### 3. 日报生成
- **运营师表格**: 为每个运营师生成Excel表格，每店一个sheet
- **简报生成**: 生成TXT格式的运营师简报
- **图表导出**: 生成数据对比图表（PNG格式）
- **AI功能**: 已关闭，仅生成数据表格和简报

### 4. 运行日志
- **实时日志**: 显示所有操作的实时日志
- **日志保存**: 支持将日志保存到文件
- **日志清空**: 可以清空日志内容

### 5. 设置管理
- **商户管理**: 添加、编辑、删除商户信息
- **配置管理**: 重新加载配置、重置配置

## 使用流程

### 第一步：数据下载
1. 在"数据下载"选项卡中选择需要的商户
2. 设置下载日期范围
3. 根据网络情况调整等待时间（建议3-10秒）
4. 确认下载路径设置
5. 点击"开始下载"按钮

### 第二步：数据清洗与导入
1. 在"数据清洗与导入"选项卡中确认数据路径
2. 点击"开始数据清洗与导入"按钮
3. 等待处理完成

### 第三步：生成日报
1. 在"生成日报"选项卡中设置报告日期
2. 选择需要生成报告的商户
3. 点击"生成日报"按钮
4. 查看生成的Excel表格和简报

## 配置说明

### 商户配置
- 默认包含：流杯酒肆、椿野里、进士食堂
- 可在配置文件中添加或修改商户信息

### 路径配置
- CPC数据路径：`D:\dianping_downloads\cpc_hourly_data`
- 运营数据路径：`D:\dianping_downloads\operation_data`
- 可在界面中修改这些路径

### 数据库配置
- 连接字符串：`mysql+pymysql://root:xpxx1688@localhost:3306/dianping`
- 表名：operation_data, cpc_hourly_data, review_data, store_mapping

## 注意事项

### 网络稳定性
- 下载过程中如果网络波动，程序可能会崩溃
- 建议在网络稳定时进行下载操作
- 可以适当增加等待时间来减少网络问题

### 文件管理
- 下载的数据会自动保存到指定路径
- 清洗导入完成后，原文件会移入回收站
- 请确保有足够的磁盘空间

### 数据库要求
- 需要MySQL数据库支持
- 确保数据库服务正在运行
- 检查数据库连接权限

## 故障排除

### 常见问题
1. **导入模块失败**: 检查legacy目录路径是否正确
2. **数据库连接失败**: 检查MySQL服务是否运行，连接字符串是否正确
3. **路径不存在**: 确保指定的下载和清洗路径存在
4. **权限不足**: 检查文件和目录的访问权限

### 日志查看
- 所有操作都会记录在"运行日志"选项卡中
- 如果出现问题，请查看日志信息
- 可以保存日志文件用于问题分析

## 技术架构

### 依赖库
- tkinter: GUI界面
- pandas: 数据处理
- sqlalchemy: 数据库操作
- threading: 多线程处理

### 文件结构
```
├── gui_main.py              # 主界面程序
├── gui_config.py            # 配置文件
├── README_GUI.md            # 使用说明
└── legacy/                  # 原有代码
    └── AI_auto_review_3_2025may/
        ├── daily_auto_report.py
        └── scripts/
            ├── auto_download/
            │   └── download.py
            └── dianping_wash_plug_in/
                └── main_flat_structure_with_trash_final.py
```

## 更新日志

### v1.0.0
- 初始版本发布
- 整合下载、清洗、导入、报告生成功能
- 支持商户选择和网速设置
- 实时日志显示
- 配置文件管理

## 联系方式
如有问题或建议，请联系开发团队。
